<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>News Base</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #e0f7fa, #fffde7);
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.8em;
      color: #2c3e50;
    }
    #searchBar {
      width: 92%;
      padding: 12px 16px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 30px;
      margin: 0 auto 30px;
      display: block;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    #newsList {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 20px;
    }
    .news-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      transition: transform 0.3s;
    }
    .news-card:hover {
      transform: translateY(-5px);
    }
    .news-banner {
      width: 100%;
      height: 160px;
      background: linear-gradient(135deg, #74ebd5, #acb6e5);
    }
    .news-content {
      padding: 20px;
      flex-grow: 1;
    }
    .news-content h2 {
      margin: 0 0 10px;
      font-size: 1.4em;
      color: #34495e;
    }
    .news-content p {
      font-size: 0.95em;
      color: #555;
      margin: 0;
    }
    .match-percent {
      margin: 10px 20px 20px;
      font-weight: bold;
      color: #28a745;
    }
    #nextButton {
      display: block;
      margin: 40px auto 0;
      padding: 12px 28px;
      font-size: 16px;
      background: #6f42c1;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: background 0.3s;
    }
    #nextButton:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    #nextButton:hover:not(:disabled) {
      background: #5936a3;
    }
  </style>
</head>
<body>

  <h1>Welcome to News Base</h1>
  <input type="text" id="searchBar" placeholder="Search News...">

  <div id="newsList"></div>

  <button id="nextButton">Next</button>

  <script>
    let allNews = [];
    let displayedCount = 0;
    const batchSize = 20;

    async function loadNews() {
      let newsItems = [];
      for (let i = 1; i <= 100; i++) {
        const url = `https://newsbase.github.io/itc/news/news${i}.html`;
        try {
          let res = await fetch(url);
          if (res.ok) {
            let html = await res.text();
            newsItems.push({
              id: i,
              content: html,
              matchPercent: Math.floor(Math.random() * 51) + 50
            });
          }
        } catch (e) {
          console.log(`Failed to load news${i}.html`);
        }
      }
      allNews = newsItems;
      showNews();
    }

    function showNews() {
      const list = document.getElementById('newsList');
      const searchTerm = document.getElementById('searchBar').value.toLowerCase();
      list.innerHTML = '';

      const filtered = allNews.filter(n => n.content.toLowerCase().includes(searchTerm));
      const toDisplay = filtered.slice(0, displayedCount + batchSize);

      toDisplay.forEach(item => {
        const card = document.createElement('div');
        card.className = 'news-card';

        const banner = document.createElement('div');
        banner.className = 'news-banner';

        const content = document.createElement('div');
        content.className = 'news-content';
        content.innerHTML = item.content;

        const match = document.createElement('div');
        match.className = 'match-percent';
        match.textContent = `Match: ${item.matchPercent}%`;

        card.appendChild(banner);
        card.appendChild(content);
        card.appendChild(match);

        list.appendChild(card);
      });

      displayedCount = toDisplay.length;

      const nextButton = document.getElementById('nextButton');
      nextButton.disabled = displayedCount >= filtered.length;
    }

    document.getElementById('nextButton').addEventListener('click', showNews);
    document.getElementById('searchBar').addEventListener('input', () => {
      displayedCount = 0;
      showNews();
    });

    loadNews();
  </script>

</body>
</html>
